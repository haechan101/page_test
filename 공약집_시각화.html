
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>대선 이슈 시각화</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h2>대선별 주요 이슈 주목도 변화</h2>
    <div id="line-chart"></div>
    <h3>클릭한 이슈의 키워드 기여도</h3>
    <div id="bar-chart" style="max-width: 100%;"></div>

    <script>
        const df = [{"index":"18대_박근혜","청년":20.06,"고용":16.3,"복지":18.25,"안보":8.84,"지역":15.88,"젠더":14.59,"기술":6.07},{"index":"19대_문재인","청년":17.55,"고용":21.16,"복지":15.22,"안보":10.51,"지역":16.03,"젠더":15.81,"기술":3.72},{"index":"20대_윤석열","청년":23.44,"고용":15.1,"복지":10.42,"안보":13.82,"지역":16.93,"젠더":6.73,"기술":13.57},{"index":"21대_이재명","청년":16.36,"고용":19.82,"복지":15.77,"안보":17.76,"지역":13.41,"젠더":5.34,"기술":11.54}];
        const keywordContributions = {"18대_박근혜": {"청년": {"대학": 0.26112776203668087, "교육": 0.6032914016552918, "취업": 0.043786117720967084, "창업": 0.057868176367592714, "부채": 0.08479002454801483, "대출": 0.25268708713084814, "공급": 0.1760646825643593, "격차": 0.13312220175438633, "청년": 0.49410479366461846, "도약": 0.05102551571603502, "희망": 0.24145325025672743, "미래": 0.08681118290565998, "기초": 0.42793161510034616, "임대": 0.10481369581993989, "학자금": 0.3448852447566682}, "고용": {"취업": 0.043786117720967084, "산업": 0.38019315956120525, "대기업": 0.048808506375399234, "근로": 0.055850308420739465, "일자리": 0.5008991591865616, "고용": 0.5477211047773549, "산재": 0.11842912207549135, "근로자": 0.2268590858679973, "노조": 0.12605342999594357, "비정규직": 0.33332016763874256, "정규직": 0.49615576970548764, "임금": 0.08957622538114596}, "복지": {"장애인": 0.23487350056417897, "소득": 0.26952306560126993, "복지": 0.8608226766263973, "요양": 0.13851059347926398, "노인": 0.34383722495913493, "보험": 0.20647303824944685, "고령화": 0.06138135647445137, "육아": 0.1251606837845629, "다문화": 0.2446157923867674, "국민연금": 0.11722084773068031, "연금": 0.34154454011490604, "주거": 0.05153305223362138, "취약": 0.12891192947901098, "의료": 0.16319678533326842}, "안보": {"북한": 0.12377162178848869, "한미": 0.04829540348323599, "방위": 0.07727264557317758, "도발": 0.08415854177085152, "국방": 0.13673241393334215, "군사": 0.06249432358369484, "안보": 0.3299258646921164, "남북관계": 0.04249378139229091, "협력": 0.10059387542465806, "외교": 0.17760392049074847}, "지역": {"지방": 0.3109614589088065, "공급": 0.1760646825643593, "지자체": 0.08089867726411173, "지방자치단체": 0.05101767809965019, "수도권": 0.06951133452299611, "분권": 0.06371324624247587, "공공기관": 0.14114385086520828, "발전": 0.08865726573084032, "농업": 0.22104198291318713, "철도": 0.2799126792943069, "어촌": 0.08237974571163471, "어업": 0.09580741342789581, "농어촌": 0.8537309287517181, "농촌": 0.06664370221705303, "주택": 0.27794890903303177}, "젠더": {"성범죄": 0.1454557980285019, "여성": 1.4178180429763696, "임신": 0.6414057867384819, "출산": 0.5498556320286757, "남성": 0.09605988610510834, "휴직": 0.06403992407007222, "육아": 0.1251606837845629, "육아휴직": 0.2018883908989358, "단절": 0.13286256703475693, "평등": 0.1008918314092619, "경력": 0.13286256703475693, "차별": 0.1389686639855117}, "기술": {"첨단": 0.06087403655316354, "에너지": 0.19476389330779606, "디지털": 0.03703737068618336, "보안": 0.07284777059161351, "기술": 0.060912302242810856, "데이터": 0.21003828163815405, "클라우드": 0.09216556639814448}}, "19대_문재인": {"청년": {"대학": 0.21244084510346173, "교육": 0.6696231466655281, "공급": 0.07817357428962593, "신혼부부": 0.08027234247770094, "부채": 0.027615916169265717, "청년": 0.20311023741737366, "창업": 0.4829883994651922, "실업": 0.1406786751995764, "기초": 0.07506207300683793, "도약": 0.08881414767831203, "미래": 0.6170248828679048, "학자금": 0.09716711244741641}, "고용": {"일자리": 0.6936551641635065, "스타트업": 0.08451795949308447, "노동": 0.2720045465382443, "산업": 0.37944185156901683, "정규직": 0.17118170717372447, "고용": 0.14566389631117166, "대기업": 0.05457446223319446, "비정규직": 0.2925275490521793, "실업": 0.1406786751995764, "임금": 0.17164771869514311, "규제": 0.13382723481475092, "공장": 0.056345416581123964, "산재": 0.10571988621231804, "노동자": 0.06591868394885605, "근로자": 0.07170488074758054, "중소": 0.07569683801325226}, "복지": {"취약": 0.06455384491171914, "국민연금": 0.03269747723408424, "주거": 0.08069164892414377, "노인": 0.11201478423615938, "소득": 0.07540022546521062, "연금": 0.06186832101314385, "간병": 0.07698162234728192, "보험": 0.03882016852502442, "의료": 0.45657175779612563, "장애인": 0.26240779345846066, "복지": 0.33392434482117717, "요양": 0.06532893297552192, "보건": 0.07481777290744548}, "안보": {"방산": 0.03960841031771116, "방위": 0.05343110913643295, "국방": 0.14573540090594322, "북한": 0.12721149533989762, "남북관계": 0.04250434021694073, "협력": 0.11535662318813418, "외교": 0.14903431562993236, "전쟁": 0.13995474441117886, "평화": 0.06307621114877979}, "지역": {"농업": 0.06319174158408696, "어업": 0.043793117327886016, "분권": 0.08671994640834078, "지방": 0.1047908088275813, "혁신도시": 0.05885460868917284, "공급": 0.07817357428962593, "주택": 0.09809476704435433, "어촌": 0.6457235784418011}, "젠더": {"차별": 0.2519701814156693, "평등": 0.6770070216197585, "스토킹": 0.0749101095844112, "경력": 0.16156143079637353, "여성": 0.23579493347842337, "성별": 0.04559030443264924, "단절": 0.1512714454287305, "임신": 0.17174285079567733, "출산": 0.5276885981855779, "육아휴직": 0.35444196291210206, "인권": 0.6411858905428496}, "기술": {"기술": 0.12021551552842413, "플랫폼": 0.0690722239947558, "에너지": 0.22172587744512195, "데이터": 0.13758487919881637, "과학": 0.15197087491622283}}, "20대_윤석열": {"청년": {"창업": 0.0357195731376356, "임대": 0.05312514328998714, "대학": 0.132231066489916, "미래": 0.03612777727971072, "공급": 0.13671328683729653, "공정": 1.9910509559813563, "청년": 0.21945606952625205, "취업": 0.14817641105421084, "대출": 0.24736966393698245, "신혼부부": 0.21001847554293113, "격차": 0.05273843344777575, "자산": 0.13602327051807822, "도약": 0.1418015629886985, "차세대": 0.1518989637161496}, "고용": {"중견": 0.04728873048909754, "중소": 0.04180509708321687, "산업": 0.22840253704723523, "근로": 0.22766310832035097, "근로자": 0.12307150129355501, "정규직": 0.060374250432175446, "임금": 0.058387763782673574, "일자리": 0.2665077668762066, "경제성장": 0.052268228453899154, "고용": 0.05604182190764187, "훈련": 0.099686804403268, "규제": 0.2047198199089183, "취업": 0.14817641105421084, "노동": 0.24160879103065303, "산재": 0.1805155711744392}, "복지": {"간병": 0.036469782364390295, "의료": 0.04814524054492359, "장애인": 0.1179715525012213, "국민연금": 0.11675091459120258, "소득": 0.10625325392839909, "연금": 0.27440808582941356, "복지": 0.07932465999446901, "주거": 0.051524893549119835, "육아": 0.18856934281145266, "취약": 0.13748883494805947}, "안보": {"협력": 0.19253331780433222, "외교": 0.07821945448657928, "방위": 0.04584909151329968, "동맹": 0.15305872075926172, "미사일": 0.12202097842453381, "한미": 0.19542785282356295, "북핵": 0.0751477792608229, "북한": 0.3500175455339672, "남북관계": 0.14990029314093709, "비핵화": 0.1826127357815707, "안보": 0.18195781087673407, "국방": 0.14339482411866136}, "지역": {"농어촌": 0.03830383272437182, "어촌": 0.05639613509544913, "농업": 0.059797614664255205, "지방": 0.0906172252133106, "소멸": 0.04860732002007568, "부동산": 0.1574494762654879, "주택": 0.24641226830050328, "수도권": 0.05281906155259493, "교통": 0.1517010225884991, "철도": 0.05186422404509102, "공급": 0.13671328683729653}, "젠더": {"여성가족부": 0.08866980240776302, "성범죄": 0.14361748688903195, "경력": 0.11950546428874316, "인권": 0.19477676493767035, "아이": 0.12341507347963385, "갈등": 0.11720745581028187, "육아": 0.18856934281145266, "육아휴직": 0.23459708739359603}, "기술": {"반도체": 0.09197939220888551, "로봇": 0.048575253711387774, "클라우드": 0.040563730665453136, "기술": 0.21350660414721512, "디지털": 0.4022146511179351, "플랫폼": 0.37844672579031124, "혁신": 0.6037934090164233, "보안": 0.08435298308001667, "사이버": 0.3863932263282638}}, "21대_이재명": {"청년": {"대학": 0.020480364006701213, "교육": 0.045963956084314285, "공급": 0.06938923057292838, "신혼부부": 0.04894699809331346, "임대": 0.10844049963112938, "자산": 0.10268149266822515, "청년": 0.3329202126163714, "대출": 0.12231272304108887, "차세대": 0.10132655533600264, "창업": 0.08561472744891589, "미래": 0.05783573230496957, "취업": 0.11707910035027486, "공정": 1.0526339706198673}, "고용": {"근로": 0.038112150193593375, "고용": 0.22028369475656523, "임금": 0.07100686437062739, "노동자": 0.08363354682961058, "비정규직": 0.036646754259211614, "노동": 0.3730866165730749, "산업": 0.4741747847250124, "규제": 0.3244334315483267, "산재": 0.1733701734059855, "근로자": 0.05111840361789213, "대기업": 0.057842039389010586, "중소": 0.18480506106451475, "스타트업": 0.34155157980367773, "일자리": 0.471197597706788, "취업": 0.11707910035027486, "중견": 0.26656914953461036}, "복지": {"주거": 0.17332960481371784, "연금": 0.15016931710592635, "의료": 0.46949539624546544, "장애인": 0.2811510250362065, "보험": 0.2703186436757244, "육아": 0.13115643096871699, "취약": 0.05873584441809802, "국민연금": 0.09292782191402282, "소득": 0.10301316965172207, "복지": 0.10357316344204094, "요양": 0.16682369589552093, "간병": 0.3010907169053402, "고령화": 0.6880797926767198}, "안보": {"방산": 0.07700647177227249, "국방": 0.12431132391348121, "중국": 0.06741467252310981, "외교": 0.29094683613449324, "협력": 0.3080509412830154, "남북관계": 0.0737712841566991, "비핵화": 0.12584072204313831, "군사": 0.1694063749899723, "평화": 0.6941275789679494, "안보": 0.5435408683434463, "계엄": 0.3679405162590396, "내란": 0.9550495009313265}, "지역": {"공급": 0.06938923057292838, "주택": 0.1260468499085817, "농업": 0.17308870134530996, "공공기관": 0.08343473967405408, "지방": 0.09121353570301188, "이전": 0.032931209649117, "교통": 0.13388765415779014, "어촌": 0.13145853416748737, "어업": 0.22079523521012384, "분권": 0.20448844998785667, "수도권": 0.05546061956655894}, "젠더": {"인권": 0.08523408930300841, "차별": 0.04432806851657245, "육아": 0.13115643096871699, "육아휴직": 0.19744379863276812, "갈등": 0.11000692990211887, "성범죄": 0.08232261556204458, "아이": 0.1678783197239409, "여성": 0.12089528305448252}, "기술": {"에너지": 0.12817612032305323, "기술": 0.0880131247717761, "데이터": 0.12350145091020162, "클라우드": 0.05716677777813982, "첨단": 0.15740543571218363, "디지털": 0.07565883060235115, "혁신": 0.18201558051316977, "반도체": 0.31647348778049567, "바이오": 0.05631898717792452, "플랫폼": 0.09311223524881063, "보안": 0.06624129826311587, "사이버": 0.16560324565778967}}};

        const categories = Object.keys(df[0]).filter(k => k !== "index");

        const traces = categories.map(category => {
            return {
                x: df.map(row => row.index),
                y: df.map(row => row[category]),
                mode: "lines+markers",
                name: category,
                customdata: df.map(row => [row.index, category]),
                hovertemplate: "%{x}<br>%{y}%<extra>%{customdata[1]}</extra>"
            };
        });

        Plotly.newPlot("line-chart", traces, {
            title: "대선별 주요 이슈 주목도 변화",
            xaxis: {title: "대선 회차"},
            yaxis: {title: "주목도 비율 (%)"},
            hovermode: "closest"
        });

        document.getElementById("line-chart").on("plotly_click", function(data) {
            const [cand, category] = data.points[0].customdata;
            const contribDict = keywordContributions[cand]?.[category];

            if (!contribDict) {
                Plotly.newPlot("bar-chart", [], {
                    title: `[${cand}] '${category}' 분야 데이터 없음`
                });
                return;
            }

            const sortedEntries = Object.entries(contribDict)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 10);

            const keywords = sortedEntries.map(item => item[0]);
            const values = sortedEntries.map(item => item[1]);
            const total = values.reduce((a, b) => a + b, 0);
            const normalized = values.map(v => v / total);

            Plotly.newPlot("bar-chart", [{
                x: keywords,
                y: normalized,
                type: "bar",
                marker: {
                    color: "steelblue"
                }
            }], {
                title: `[${cand}] '${category}' 키워드 기여도`,
                xaxis: {title: "키워드"},
                yaxis: {title: "비율 (Normalized)"}
            });
        });
    </script>
</body>
</html>
